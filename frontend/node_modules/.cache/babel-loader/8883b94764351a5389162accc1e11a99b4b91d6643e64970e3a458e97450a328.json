{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\Game Theory task\\\\frontend\\\\src\\\\pages\\\\Bookslots.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport NavbarUser from \"../components/NavbarUser\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Bookslots() {\n  _s();\n  const {\n    bookingId\n  } = useParams(); // Get bookingId from the URL\n  const navigate = useNavigate(); // To redirect after successful booking\n  const user = useContext(AuthContext); // Get userId and name from context\n  const [formData, setFormData] = useState({}); // Form state\n\n  // Fetch booking data on component mount\n  useEffect(() => {\n    const fetchBooking = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_BACKENDAPI}/api/booking/${bookingId}`);\n        const booking = response.data;\n\n        // Set pre-filled form fields\n        setFormData({\n          courtName: booking.courtId.name,\n          sportName: booking.sportId.name,\n          centerName: booking.centerId.name,\n          bookingDate: new Date(booking.date).toISOString().split(\"T\")[0],\n          bookingSlot: booking.bookingSlot\n        });\n      } catch (error) {\n        console.error(\"Error fetching booking data:\", error);\n      }\n    };\n    fetchBooking();\n  }, [bookingId]);\n\n  // Submit booking request\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // PUT request to update booking\n      const response = await axios.put(`${process.env.REACT_APP_BACKENDAPI}/api/booking/book/${bookingId}`, {\n        userId: user.user.user._id,\n        customername: user.user.user.name\n      });\n      alert(response.data.message); // Show success message\n      navigate(\"/dashboard\"); // Redirect to the dashboard page\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error updating booking:\", error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An error occurred. Please try again.\");\n    }\n  };\n  console.log(user);\n  if (!formData.courtName) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 35\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"centreschedule\",\n    children: [/*#__PURE__*/_jsxDEV(NavbarUser, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Book Slot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Centre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 74,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.centerName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 75,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Court\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.courtName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Sport\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.sportName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 81,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 86,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: formData.bookingDate,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Time Slot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.bookingSlot,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          children: \"Confirm Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 93,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookslots, \"eHL9exW4gLdC3I8MQrcdBBrU5pc=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Bookslots;\nvar _c;\n$RefreshReg$(_c, \"Bookslots\");","map":{"version":3,"names":["React","useEffect","useState","useContext","NavbarUser","useParams","useNavigate","axios","AuthContext","jsxDEV","_jsxDEV","Bookslots","_s","bookingId","navigate","user","formData","setFormData","fetchBooking","response","get","process","env","REACT_APP_BACKENDAPI","booking","data","courtName","courtId","name","sportName","sportId","centerName","centerId","bookingDate","Date","date","toISOString","split","bookingSlot","error","console","handleSubmit","e","preventDefault","put","userId","_id","customername","alert","message","_error$response","_error$response$data","log","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","value","readOnly","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/Game Theory task/frontend/src/pages/Bookslots.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport NavbarUser from \"../components/NavbarUser\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function Bookslots() {\r\n  const { bookingId } = useParams(); // Get bookingId from the URL\r\n  const navigate = useNavigate(); // To redirect after successful booking\r\n  const user = useContext(AuthContext); // Get userId and name from context\r\n  const [formData, setFormData] = useState({}); // Form state\r\n\r\n  // Fetch booking data on component mount\r\n  useEffect(() => {\r\n    const fetchBooking = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_BACKENDAPI}/api/booking/${bookingId}`\r\n        );\r\n\r\n        const booking = response.data;\r\n\r\n        // Set pre-filled form fields\r\n        setFormData({\r\n          courtName: booking.courtId.name,\r\n          sportName: booking.sportId.name,\r\n          centerName: booking.centerId.name,\r\n          bookingDate: new Date(booking.date).toISOString().split(\"T\")[0],\r\n          bookingSlot: booking.bookingSlot,\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error fetching booking data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchBooking();\r\n  }, [bookingId]);\r\n\r\n  // Submit booking request\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      // PUT request to update booking\r\n      const response = await axios.put(\r\n        `${process.env.REACT_APP_BACKENDAPI}/api/booking/book/${bookingId}`,\r\n        {\r\n          userId : user.user.user._id, \r\n          customername: user.user.user.name , \r\n        }\r\n      );\r\n\r\n      alert(response.data.message); // Show success message\r\n      navigate(\"/dashboard\"); // Redirect to the dashboard page\r\n    } catch (error) {\r\n      console.error(\"Error updating booking:\", error);\r\n      alert(\r\n        error.response?.data?.message || \"An error occurred. Please try again.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  console.log(user)\r\n\r\n  if (!formData.courtName) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"centreschedule\">\r\n      <NavbarUser />\r\n      <div className=\"form-container\">\r\n        <h2>Book Slot</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            <label>Centre</label>\r\n            <input type=\"text\" value={formData.centerName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Court</label>\r\n            <input type=\"text\" value={formData.courtName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Sport</label>\r\n            <input type=\"text\" value={formData.sportName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Date</label>\r\n            <input type=\"date\" value={formData.bookingDate} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Time Slot</label>\r\n            <input type=\"text\" value={formData.bookingSlot} readOnly />\r\n          </div>\r\n          <button type=\"submit\" className=\"submit-button\">\r\n            Confirm Booking\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}