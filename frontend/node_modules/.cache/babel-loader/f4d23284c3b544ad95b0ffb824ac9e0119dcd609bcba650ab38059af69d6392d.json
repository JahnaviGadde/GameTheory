{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Dell\\\\Desktop\\\\Game Theory task\\\\frontend\\\\src\\\\pages\\\\Bookslots.jsx\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState, useContext } from \"react\";\nimport NavbarUser from \"../components/NavbarUser\";\nimport { useParams, useNavigate } from \"react-router-dom\";\nimport axios from \"axios\";\nimport { AuthContext } from \"../context/AuthContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Bookslots() {\n  _s();\n  const {\n    bookingId\n  } = useParams(); // Get bookingId from the URL\n  const navigate = useNavigate(); // To redirect after successful booking\n  const {\n    userId,\n    name\n  } = useContext(AuthContext); // Get userId and name from context\n  const [formData, setFormData] = useState({}); // Form state\n\n  // Fetch booking data on component mount\n  useEffect(() => {\n    const fetchBooking = async () => {\n      try {\n        const response = await axios.get(`${process.env.REACT_APP_BACKENDAPI}/api/booking/${bookingId}`);\n        const booking = response.data;\n\n        // Set pre-filled form fields\n        setFormData({\n          courtName: booking.courtId.name,\n          sportName: booking.sportId.name,\n          centerName: booking.centerId.name,\n          bookingDate: new Date(booking.date).toISOString().split(\"T\")[0],\n          bookingSlot: booking.bookingSlot\n        });\n      } catch (error) {\n        console.error(\"Error fetching booking data:\", error);\n      }\n    };\n    fetchBooking();\n  }, [bookingId]);\n\n  // Submit booking request\n  const handleSubmit = async e => {\n    e.preventDefault();\n    try {\n      // PUT request to update booking\n      const response = await axios.put(`${process.env.REACT_APP_BACKENDAPI}/api/booking/book/${bookingId}`, {\n        userId,\n        // Pass userId from context\n        customername: name // Pass name from context\n      });\n      alert(response.data.message); // Show success message\n      navigate(\"/dashboard\"); // Redirect to the dashboard page\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Error updating booking:\", error);\n      alert(((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"An error occurred. Please try again.\");\n    }\n  };\n  if (!formData.courtName) return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: \"Loading...\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 35\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"centreschedule\",\n    children: [/*#__PURE__*/_jsxDEV(NavbarUser, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"form-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"Book Slot\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Centre\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.centerName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Court\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.courtName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Sport\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 80,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.sportName,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Date\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"date\",\n            value: formData.bookingDate,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 85,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            children: \"Time Slot\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: formData.bookingSlot,\n            readOnly: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: \"submit-button\",\n          children: \"Confirm Booking\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 66,\n    columnNumber: 5\n  }, this);\n}\n_s(Bookslots, \"rL/tPKLAPGSbt31Oeu39uSDaGZQ=\", false, function () {\n  return [useParams, useNavigate];\n});\n_c = Bookslots;\nvar _c;\n$RefreshReg$(_c, \"Bookslots\");","map":{"version":3,"names":["React","useEffect","useState","useContext","NavbarUser","useParams","useNavigate","axios","AuthContext","jsxDEV","_jsxDEV","Bookslots","_s","bookingId","navigate","userId","name","formData","setFormData","fetchBooking","response","get","process","env","REACT_APP_BACKENDAPI","booking","data","courtName","courtId","sportName","sportId","centerName","centerId","bookingDate","Date","date","toISOString","split","bookingSlot","error","console","handleSubmit","e","preventDefault","put","customername","alert","message","_error$response","_error$response$data","children","fileName","_jsxFileName","lineNumber","columnNumber","className","onSubmit","type","value","readOnly","_c","$RefreshReg$"],"sources":["C:/Users/Dell/Desktop/Game Theory task/frontend/src/pages/Bookslots.jsx"],"sourcesContent":["import React, { useEffect, useState, useContext } from \"react\";\r\nimport NavbarUser from \"../components/NavbarUser\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\n\r\nexport default function Bookslots() {\r\n  const { bookingId } = useParams(); // Get bookingId from the URL\r\n  const navigate = useNavigate(); // To redirect after successful booking\r\n  const { userId, name } = useContext(AuthContext); // Get userId and name from context\r\n  const [formData, setFormData] = useState({}); // Form state\r\n\r\n  // Fetch booking data on component mount\r\n  useEffect(() => {\r\n    const fetchBooking = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_BACKENDAPI}/api/booking/${bookingId}`\r\n        );\r\n\r\n        const booking = response.data;\r\n\r\n        // Set pre-filled form fields\r\n        setFormData({\r\n          courtName: booking.courtId.name,\r\n          sportName: booking.sportId.name,\r\n          centerName: booking.centerId.name,\r\n          bookingDate: new Date(booking.date).toISOString().split(\"T\")[0],\r\n          bookingSlot: booking.bookingSlot,\r\n        });\r\n      } catch (error) {\r\n        console.error(\"Error fetching booking data:\", error);\r\n      }\r\n    };\r\n\r\n    fetchBooking();\r\n  }, [bookingId]);\r\n\r\n  // Submit booking request\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n\r\n    try {\r\n      // PUT request to update booking\r\n      const response = await axios.put(\r\n        `${process.env.REACT_APP_BACKENDAPI}/api/booking/book/${bookingId}`,\r\n        {\r\n          userId, // Pass userId from context\r\n          customername: name, // Pass name from context\r\n        }\r\n      );\r\n\r\n      alert(response.data.message); // Show success message\r\n      navigate(\"/dashboard\"); // Redirect to the dashboard page\r\n    } catch (error) {\r\n      console.error(\"Error updating booking:\", error);\r\n      alert(\r\n        error.response?.data?.message || \"An error occurred. Please try again.\"\r\n      );\r\n    }\r\n  };\r\n\r\n  if (!formData.courtName) return <div>Loading...</div>;\r\n\r\n  return (\r\n    <div className=\"centreschedule\">\r\n      <NavbarUser />\r\n      <div className=\"form-container\">\r\n        <h2>Book Slot</h2>\r\n        <form onSubmit={handleSubmit}>\r\n          <div>\r\n            <label>Centre</label>\r\n            <input type=\"text\" value={formData.centerName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Court</label>\r\n            <input type=\"text\" value={formData.courtName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Sport</label>\r\n            <input type=\"text\" value={formData.sportName} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Date</label>\r\n            <input type=\"date\" value={formData.bookingDate} readOnly />\r\n          </div>\r\n          <div>\r\n            <label>Time Slot</label>\r\n            <input type=\"text\" value={formData.bookingSlot} readOnly />\r\n          </div>\r\n          <button type=\"submit\" className=\"submit-button\">\r\n            Confirm Booking\r\n          </button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,SAAS,EAAEC,QAAQ,EAAEC,UAAU,QAAQ,OAAO;AAC9D,OAAOC,UAAU,MAAM,0BAA0B;AACjD,SAASC,SAAS,EAAEC,WAAW,QAAQ,kBAAkB;AACzD,OAAOC,KAAK,MAAM,OAAO;AACzB,SAASC,WAAW,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAErD,eAAe,SAASC,SAASA,CAAA,EAAG;EAAAC,EAAA;EAClC,MAAM;IAAEC;EAAU,CAAC,GAAGR,SAAS,CAAC,CAAC,CAAC,CAAC;EACnC,MAAMS,QAAQ,GAAGR,WAAW,CAAC,CAAC,CAAC,CAAC;EAChC,MAAM;IAAES,MAAM;IAAEC;EAAK,CAAC,GAAGb,UAAU,CAACK,WAAW,CAAC,CAAC,CAAC;EAClD,MAAM,CAACS,QAAQ,EAAEC,WAAW,CAAC,GAAGhB,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;;EAE9C;EACAD,SAAS,CAAC,MAAM;IACd,MAAMkB,YAAY,GAAG,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACF,MAAMC,QAAQ,GAAG,MAAMb,KAAK,CAACc,GAAG,CAC9B,GAAGC,OAAO,CAACC,GAAG,CAACC,oBAAoB,gBAAgBX,SAAS,EAC9D,CAAC;QAED,MAAMY,OAAO,GAAGL,QAAQ,CAACM,IAAI;;QAE7B;QACAR,WAAW,CAAC;UACVS,SAAS,EAAEF,OAAO,CAACG,OAAO,CAACZ,IAAI;UAC/Ba,SAAS,EAAEJ,OAAO,CAACK,OAAO,CAACd,IAAI;UAC/Be,UAAU,EAAEN,OAAO,CAACO,QAAQ,CAAChB,IAAI;UACjCiB,WAAW,EAAE,IAAIC,IAAI,CAACT,OAAO,CAACU,IAAI,CAAC,CAACC,WAAW,CAAC,CAAC,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;UAC/DC,WAAW,EAAEb,OAAO,CAACa;QACvB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOC,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,8BAA8B,EAAEA,KAAK,CAAC;MACtD;IACF,CAAC;IAEDpB,YAAY,CAAC,CAAC;EAChB,CAAC,EAAE,CAACN,SAAS,CAAC,CAAC;;EAEf;EACA,MAAM4B,YAAY,GAAG,MAAOC,CAAC,IAAK;IAChCA,CAAC,CAACC,cAAc,CAAC,CAAC;IAElB,IAAI;MACF;MACA,MAAMvB,QAAQ,GAAG,MAAMb,KAAK,CAACqC,GAAG,CAC9B,GAAGtB,OAAO,CAACC,GAAG,CAACC,oBAAoB,qBAAqBX,SAAS,EAAE,EACnE;QACEE,MAAM;QAAE;QACR8B,YAAY,EAAE7B,IAAI,CAAE;MACtB,CACF,CAAC;MAED8B,KAAK,CAAC1B,QAAQ,CAACM,IAAI,CAACqB,OAAO,CAAC,CAAC,CAAC;MAC9BjC,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC;IAC1B,CAAC,CAAC,OAAOyB,KAAK,EAAE;MAAA,IAAAS,eAAA,EAAAC,oBAAA;MACdT,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;MAC/CO,KAAK,CACH,EAAAE,eAAA,GAAAT,KAAK,CAACnB,QAAQ,cAAA4B,eAAA,wBAAAC,oBAAA,GAAdD,eAAA,CAAgBtB,IAAI,cAAAuB,oBAAA,uBAApBA,oBAAA,CAAsBF,OAAO,KAAI,sCACnC,CAAC;IACH;EACF,CAAC;EAED,IAAI,CAAC9B,QAAQ,CAACU,SAAS,EAAE,oBAAOjB,OAAA;IAAAwC,QAAA,EAAK;EAAU;IAAAC,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OAAK,CAAC;EAErD,oBACE5C,OAAA;IAAK6C,SAAS,EAAC,gBAAgB;IAAAL,QAAA,gBAC7BxC,OAAA,CAACN,UAAU;MAAA+C,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAE,CAAC,eACd5C,OAAA;MAAK6C,SAAS,EAAC,gBAAgB;MAAAL,QAAA,gBAC7BxC,OAAA;QAAAwC,QAAA,EAAI;MAAS;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAI,CAAC,eAClB5C,OAAA;QAAM8C,QAAQ,EAAEf,YAAa;QAAAS,QAAA,gBAC3BxC,OAAA;UAAAwC,QAAA,gBACExC,OAAA;YAAAwC,QAAA,EAAO;UAAM;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACrB5C,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAACC,KAAK,EAAEzC,QAAQ,CAACc,UAAW;YAAC4B,QAAQ;UAAA;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACvD,CAAC,eACN5C,OAAA;UAAAwC,QAAA,gBACExC,OAAA;YAAAwC,QAAA,EAAO;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACpB5C,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAACC,KAAK,EAAEzC,QAAQ,CAACU,SAAU;YAACgC,QAAQ;UAAA;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtD,CAAC,eACN5C,OAAA;UAAAwC,QAAA,gBACExC,OAAA;YAAAwC,QAAA,EAAO;UAAK;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACpB5C,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAACC,KAAK,EAAEzC,QAAQ,CAACY,SAAU;YAAC8B,QAAQ;UAAA;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACtD,CAAC,eACN5C,OAAA;UAAAwC,QAAA,gBACExC,OAAA;YAAAwC,QAAA,EAAO;UAAI;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACnB5C,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAACC,KAAK,EAAEzC,QAAQ,CAACgB,WAAY;YAAC0B,QAAQ;UAAA;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC,eACN5C,OAAA;UAAAwC,QAAA,gBACExC,OAAA;YAAAwC,QAAA,EAAO;UAAS;YAAAC,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eACxB5C,OAAA;YAAO+C,IAAI,EAAC,MAAM;YAACC,KAAK,EAAEzC,QAAQ,CAACqB,WAAY;YAACqB,QAAQ;UAAA;YAAAR,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAE,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACxD,CAAC,eACN5C,OAAA;UAAQ+C,IAAI,EAAC,QAAQ;UAACF,SAAS,EAAC,eAAe;UAAAL,QAAA,EAAC;QAEhD;UAAAC,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAQ,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACL,CAAC;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAEV;AAAC1C,EAAA,CA3FuBD,SAAS;EAAA,QACTN,SAAS,EACdC,WAAW;AAAA;AAAAsD,EAAA,GAFNjD,SAAS;AAAA,IAAAiD,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}