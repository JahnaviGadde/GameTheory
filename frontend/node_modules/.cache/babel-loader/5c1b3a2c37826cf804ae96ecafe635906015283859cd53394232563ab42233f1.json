{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import\"./Slotstable.css\";import{useParams,useNavigate}from\"react-router-dom\";import axios from\"axios\";// Main component\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Adminslots(){const today=new Date();const formattedToday=today.toISOString().split(\"T\")[0];const[selectedDate,setSelectedDate]=useState(formattedToday);const[courts,setCourts]=useState([]);const[bookings,setBookings]=useState({});const{centreId}=useParams();const handleDateChange=e=>{setSelectedDate(e.target.value);};const times=[\"5:00 AM - 6:00 AM\",\"6:00 AM - 7:00 AM\",\"7:00 AM - 8:00 AM\",\"8:00 AM - 9:00 AM\",\"9:00 AM - 10:00 AM\",\"10:00 AM - 11:00 AM\",\"11:00 AM - 12:00 PM\",\"12:00 PM - 1:00 PM\",\"1:00 PM - 2:00 PM\",\"2:00 PM - 3:00 PM\",\"3:00 PM - 4:00 PM\",\"4:00 PM - 5:00 PM\",\"5:00 PM - 6:00 PM\",\"6:00 PM - 7:00 PM\",\"7:00 PM - 8:00 PM\",\"8:00 PM - 9:00 PM\",\"9:00 PM - 10:00 PM\",\"10:00 PM - 11:00 PM\",\"11:00 PM - 12:00 AM\"];useEffect(()=>{const fetchCourts=async()=>{try{const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKENDAPI,\"/api/court/center/\").concat(centreId));setCourts(response.data);}catch(error){console.error(\"Error fetching courts:\",error);}};fetchCourts();},[centreId]);useEffect(()=>{const fetchBookings=async()=>{const bookingData={};try{for(let court of courts){const response=await axios.get(\"\".concat(process.env.REACT_APP_BACKENDAPI,\"/api/booking/court/\").concat(court._id,\"/date/\").concat(selectedDate));const bookingsForCourt=response.data;bookingData[court._id]={};bookingsForCourt.forEach(booking=>{const timeSlot=booking.bookingSlot;bookingData[court._id][timeSlot]=booking;});}setBookings(bookingData);}catch(error){console.error(\"Error fetching booking data\",error);}};if(courts.length)fetchBookings();},[courts,selectedDate]);return/*#__PURE__*/_jsxs(\"div\",{className:\"court-schedule\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"date-selector\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:selectedDate,onChange:handleDateChange,className:\"calendar-input\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"schedule-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:\"Court Name\"}),times.map((time,index)=>/*#__PURE__*/_jsx(\"th\",{style:{textAlign:\"center\"},children:time},index))]})}),/*#__PURE__*/_jsx(\"tbody\",{children:courts.map(court=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{className:\"court-name\",style:{textAlign:\"center\"},children:court.name}),times.map(timeSlot=>{var _bookings$court$_id,_bookings$court$_id$t,_bookings$court$_id2,_bookings$court$_id2$;const bookingStatus=(_bookings$court$_id=bookings[court._id])===null||_bookings$court$_id===void 0?void 0:(_bookings$court$_id$t=_bookings$court$_id[timeSlot])===null||_bookings$court$_id$t===void 0?void 0:_bookings$court$_id$t.bookingStatus;const userName=(_bookings$court$_id2=bookings[court._id])===null||_bookings$court$_id2===void 0?void 0:(_bookings$court$_id2$=_bookings$court$_id2[timeSlot])===null||_bookings$court$_id2$===void 0?void 0:_bookings$court$_id2$.customerName;return/*#__PURE__*/_jsxs(\"td\",{style:{textAlign:\"center\",backgroundColor:bookingStatus===\"booked\"?\"#FF7f7f\":bookingStatus===\"empty\"?\"#ADD8E6\":\"#D3D3D3\",padding:\"8px\"},children:[bookingStatus===\"booked\"&&\"Booked by \".concat(userName),bookingStatus===\"empty\"&&\"Available\",bookingStatus!==\"booked\"&&bookingStatus!==\"empty\"&&\"\"]},timeSlot);})]},court._id))})]})})]});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Adminslots","today","Date","formattedToday","toISOString","split","selectedDate","setSelectedDate","courts","setCourts","bookings","setBookings","centreId","handleDateChange","e","target","value","times","fetchCourts","response","get","concat","process","env","REACT_APP_BACKENDAPI","data","error","console","fetchBookings","bookingData","court","_id","bookingsForCourt","forEach","booking","timeSlot","bookingSlot","length","className","children","type","onChange","style","textAlign","map","time","index","name","_bookings$court$_id","_bookings$court$_id$t","_bookings$court$_id2","_bookings$court$_id2$","bookingStatus","userName","customerName","backgroundColor","padding"],"sources":["C:/Users/Dell/Desktop/task/GameTheory/frontend/src/components/AdminSlots.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport \"./Slotstable.css\";\r\nimport { useParams, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\n\r\n// Main component\r\nexport default function Adminslots() {\r\n  const today = new Date();\r\n  const formattedToday = today.toISOString().split(\"T\")[0];\r\n  const [selectedDate, setSelectedDate] = useState(formattedToday);\r\n  const [courts, setCourts] = useState([]);\r\n  const [bookings, setBookings] = useState({}); \r\n\r\n  const { centreId } = useParams(); \r\n\r\n  const handleDateChange = (e) => {\r\n    setSelectedDate(e.target.value);\r\n  };\r\n\r\n  const times = [\"5:00 AM - 6:00 AM\", \"6:00 AM - 7:00 AM\", \"7:00 AM - 8:00 AM\", \"8:00 AM - 9:00 AM\", \"9:00 AM - 10:00 AM\",\"10:00 AM - 11:00 AM\",\"11:00 AM - 12:00 PM\",\"12:00 PM - 1:00 PM\",\"1:00 PM - 2:00 PM\",\"2:00 PM - 3:00 PM\",\"3:00 PM - 4:00 PM\",\"4:00 PM - 5:00 PM\",\"5:00 PM - 6:00 PM\",\"6:00 PM - 7:00 PM\",\"7:00 PM - 8:00 PM\",\"8:00 PM - 9:00 PM\",\"9:00 PM - 10:00 PM\",\"10:00 PM - 11:00 PM\",\"11:00 PM - 12:00 AM\",];\r\n\r\n  useEffect(() => {\r\n    const fetchCourts = async () => {\r\n      try {\r\n        const response = await axios.get(\r\n          `${process.env.REACT_APP_BACKENDAPI}/api/court/center/${centreId}`\r\n        );\r\n        setCourts(response.data);\r\n      } catch (error) {\r\n        console.error(\"Error fetching courts:\", error);\r\n      }\r\n    };\r\n\r\n    fetchCourts();\r\n  }, [centreId]);\r\n\r\n  useEffect(() => {\r\n    const fetchBookings = async () => {\r\n      const bookingData = {}; \r\n\r\n      try {\r\n        for (let court of courts) {\r\n          const response = await axios.get(\r\n            `${process.env.REACT_APP_BACKENDAPI}/api/booking/court/${court._id}/date/${selectedDate}`\r\n          );\r\n\r\n          const bookingsForCourt = response.data;\r\n          bookingData[court._id] = {};\r\n\r\n          bookingsForCourt.forEach((booking) => {\r\n            const timeSlot = booking.bookingSlot;\r\n            bookingData[court._id][timeSlot] = booking;\r\n          });\r\n        }\r\n\r\n        setBookings(bookingData);\r\n      } catch (error) {\r\n        console.error(\"Error fetching booking data\", error);\r\n      }\r\n    };\r\n\r\n    if (courts.length) fetchBookings();\r\n  }, [courts, selectedDate]);\r\n\r\n  return (\r\n    <div className=\"court-schedule\">\r\n      <div className=\"date-selector\">\r\n        <input\r\n          type=\"date\"\r\n          value={selectedDate}\r\n          onChange={handleDateChange}\r\n          className=\"calendar-input\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"schedule-table\">\r\n        <table>\r\n          <thead>\r\n            <tr>\r\n              <th style={{ textAlign: \"center\" }}>Court Name</th>\r\n              {times.map((time, index) => (\r\n                <th key={index} style={{ textAlign: \"center\" }}>\r\n                  {time}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {courts.map((court) => (\r\n              <tr key={court._id}>\r\n\r\n                <td className=\"court-name\" style={{ textAlign: \"center\" }}>\r\n                  {court.name}\r\n                </td>\r\n                {times.map((timeSlot) => {\r\n                  const bookingStatus = bookings[court._id]?.[timeSlot]?.bookingStatus;\r\n                  const userName = bookings[court._id]?.[timeSlot]?.customerName;\r\n                  return (\r\n                    <td\r\n                  key={timeSlot}\r\n                  style={{\r\n                    textAlign: \"center\",\r\n                    backgroundColor:\r\n                      bookingStatus === \"booked\"\r\n                        ? \"#FF7f7f\" \r\n                        : bookingStatus === \"empty\"\r\n                        ? \"#ADD8E6\" \r\n                        : \"#D3D3D3\",\r\n                    padding: \"8px\",\r\n                  }}\r\n                >\r\n                  {bookingStatus === \"booked\" && `Booked by ${userName}`}\r\n                  {bookingStatus === \"empty\" && \"Available\"}\r\n                  {bookingStatus !== \"booked\" && bookingStatus !== \"empty\" && \"\"}\r\n                </td>\r\n                  );\r\n                })}\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}