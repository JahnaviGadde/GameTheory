{"ast":null,"code":"import{useContext,useRef,useState}from\"react\";import\"./Signin.css\";import{AuthContext}from\"../context/AuthContext\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Login(){const email=useRef();const password=useRef();const[admin,setadmin]=useState(false);const[userrole,setuserrole]=useState(false);const Navigate=useNavigate();const{user,isFetching,dispatch}=useContext(AuthContext);const handleLogin=e=>{e.preventDefault();if(userrole===true){const loginUser=async(userCredential,dispatch)=>{dispatch({type:\"LOGIN_START\"});try{const res=await axios.post(\"\".concat(process.env.REACT_APP_BACKENDAPI,\"/api/user/signin\"),userCredential);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});console.log(res);Navigate(\"/dashboard/\".concat(res.data.user.name));}catch(err){dispatch({type:\"LOGIN_FAILURE\",payload:err});}};const userCredential={email:email.current.value,password:password.current.value};loginUser(userCredential,dispatch);}if(admin===true){const loginUser=async(userCredential,dispatch)=>{dispatch({type:\"LOGIN_START\"});try{const res=await axios.post(\"\".concat(process.env.REACT_APP_BACKENDAPI,\"/api/admin/signin\"),userCredential);dispatch({type:\"LOGIN_SUCCESS\",payload:res.data});console.log(res.data);Navigate(\"/monitorslots/\".concat(res.data.centerId));}catch(err){dispatch({type:\"LOGIN_FAILURE\",payload:err});}};const userCredential={email:email.current.value,password:password.current.value};loginUser(userCredential,dispatch);}};return/*#__PURE__*/_jsx(\"div\",{className:\"login\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"loginwrapper\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loginlogo\",children:/*#__PURE__*/_jsx(\"span\",{children:\"Game Theory\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"loginform\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"logintitle\",children:\"Login \"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"roleinput\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Login as\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"role\",required:true,onChange:e=>setuserrole(true)}),\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"user\",children:\"User\"}),\" \",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"radio\",name:\"role\",required:true,onChange:e=>setadmin(true)}),\" \",/*#__PURE__*/_jsx(\"label\",{htmlFor:\"admin\",children:\"I own a games centre\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",placeholder:\"email\",className:\"logininput\",ref:email,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"password\",ref:password,className:\"logininput\",required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"loginButton\",disabled:isFetching,children:\"Login\"})]})]})]})});}","map":{"version":3,"names":["useContext","useRef","useState","AuthContext","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Login","email","password","admin","setadmin","userrole","setuserrole","Navigate","user","isFetching","dispatch","handleLogin","e","preventDefault","loginUser","userCredential","type","res","post","concat","process","env","REACT_APP_BACKENDAPI","payload","data","console","log","name","err","current","value","centerId","className","children","onSubmit","required","onChange","htmlFor","placeholder","ref","disabled"],"sources":["C:/Users/Dell/Desktop/task/GameTheory/frontend/src/pages/Signin.jsx"],"sourcesContent":["import { useContext, useRef, useState } from \"react\";\r\nimport \"./Signin.css\";\r\nimport { AuthContext } from \"../context/AuthContext\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nexport default function Login() {\r\n\r\n  const email = useRef();\r\n  const password = useRef();\r\n  const [admin , setadmin] = useState(false);\r\n  const[userrole , setuserrole] = useState(false);\r\n  const Navigate = useNavigate();\r\n  const { user , isFetching, dispatch } = useContext(AuthContext);\r\n\r\n  const handleLogin = (e) => {\r\n    e.preventDefault();\r\n    \r\n    if(userrole === true){ \r\n      \r\n      const loginUser = async (userCredential, dispatch) => {  \r\n        dispatch({ type: \"LOGIN_START\" });\r\n        try {\r\n          const res = await axios.post( `${process.env.REACT_APP_BACKENDAPI}/api/user/signin`, userCredential);\r\n          dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n          console.log(res);\r\n          Navigate(`/dashboard/${res.data.user.name}`)\r\n          \r\n        } catch (err) {\r\n          dispatch({ type: \"LOGIN_FAILURE\", payload: err });\r\n        }\r\n      }\r\n\r\n      const userCredential =  { email: email.current.value, password: password.current.value };\r\n      loginUser(userCredential , dispatch);\r\n\r\n  }\r\n\r\n    if(admin === true){\r\n\r\n      const loginUser = async (userCredential, dispatch) => {  \r\n        dispatch({ type: \"LOGIN_START\" });\r\n        try {\r\n          const res = await axios.post( `${process.env.REACT_APP_BACKENDAPI}/api/admin/signin`, userCredential);\r\n          dispatch({ type: \"LOGIN_SUCCESS\", payload: res.data });\r\n          console.log(res.data)\r\n          Navigate(`/monitorslots/${res.data.centerId}`)\r\n          \r\n        } catch (err) {\r\n          dispatch({ type: \"LOGIN_FAILURE\", payload: err });\r\n        }\r\n      }\r\n\r\n      const userCredential =  { email: email.current.value, password: password.current.value };\r\n      loginUser(userCredential , dispatch);\r\n     \r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='login'>\r\n        <div className='loginwrapper'>\r\n          <div className='loginlogo'>\r\n            <span>Game Theory</span>\r\n           </div>\r\n           <div className='loginform'>\r\n            <span className=\"logintitle\">Login </span> \r\n           <form onSubmit={handleLogin}>\r\n           <div className='roleinput'>\r\n              <span>Login as</span> <br />\r\n              <input type=\"radio\"  name='role' required   onChange={(e) => setuserrole(true)}/> <label htmlFor=\"user\">User</label> <br/>\r\n              <input type=\"radio\" name='role' required   onChange={(e) => setadmin(true)}/> <label htmlFor=\"admin\">I own a games centre</label>\r\n              </div>\r\n             <input type=\"email\" placeholder='email'  className=\"logininput\" ref={email} required/>\r\n              <input type=\"password\" placeholder='password' ref={password}  className=\"logininput\" required/><br />\r\n               <button type='submit' className=\"loginButton\" disabled={isFetching}  >Login</button>\r\n           </form>\r\n           </div>\r\n        </div>\r\n    </div>\r\n  )\r\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}